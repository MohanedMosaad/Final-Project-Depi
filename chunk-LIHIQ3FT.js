import{a as q}from"./chunk-3Z2WDITO.js";import{L as F,ca as j}from"./chunk-JFSNWHGR.js";import{Bb as v,Bc as D,Db as _,Fc as $,Lb as n,Mb as d,Pa as E,Sa as o,Tb as T,W as O,Yb as L,_b as k,aa as c,bb as g,ea as y,gb as I,kb as M,ma as b,na as x,pb as P,qb as f,r as S,sb as C,tb as h,ub as t,vb as e,wb as s,yb as w}from"./chunk-PRRQ4Y73.js";var p=class a{request=c(q);getCart(){return this.request.getApiUrl("Cart").pipe(S(i=>Object.values(i)))}getProductById(i){return this.request.getApiUrl(`products/${i}`)}deleteOrder(i){return this.request.deleteApiRequest("Cart.json",i)}static \u0275fac=function(r){return new(r||a)};static \u0275prov=O({token:a,factory:a.\u0275fac,providedIn:"root"})};function A(a,i){if(a&1){let r=w();t(0,"tr")(1,"th",14),n(2),e(),t(3,"td"),n(4),e(),t(5,"td"),n(6),L(7,"date"),e(),t(8,"td"),n(9,"1"),e(),t(10,"td")(11,"button",15),v("click",function(){let m=b(r).$implicit,u=_();return x(u.deleteItem(m))}),s(12,"i",16),e(),t(13,"button",17),v("click",function(){let m=b(r).$index,u=_();return x(u.view(m))}),s(14,"i",18),e()()()}if(a&2){let r=i.$implicit,l=i.$index;o(2),d(l+1),o(2),d(r.userId),o(2),d(k(7,3,r.date,"dd/MM/yyyy"))}}function U(a,i){if(a&1&&(t(0,"tr")(1,"th",14),s(2,"img",19),e(),t(3,"td"),n(4),e(),t(5,"td"),n(6),e(),t(7,"td"),n(8),e(),t(9,"td"),n(10),e()()),a&2){let r=i.$implicit;o(2),M("src",r.img,E),o(2),d(r.name),o(2),d(r.price),o(2),d(1),o(2),d(r.price)}}function N(a,i){a&1&&s(0,"app-loader")}var B=class a{loading=!0;service=c(p);cartList=g([]);item=g([]);subscriptionList=[];ngOnInit(){this.getCartItems()}ngOnDestroy(){this.subscriptionList.forEach(i=>{i.unsubscribe()})}getCartItems(){this.loading=!0,this.subscriptionList.push(this.service.getCart().subscribe(i=>{this.cartList.set(i),this.loading=!1}))}view(i){this.item.set([]),this.cartList()[i].products.forEach(l=>{this.service.getProductById(l.productId).subscribe(m=>{this.item().push(m)})})}deleteItem(i){this.service.deleteOrder(i.id).subscribe(()=>{console.log(i.id),this.getCartItems()}),this.getCartItems()}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=y({type:a,selectors:[["app-orders"]],standalone:!0,features:[T],decls:45,vars:1,consts:[[1,"containt"],[1,"table","border"],["scope","col",1,"col"],["scope","col",1,"col-3"],["scope","col",1,"col-2"],[1,"table-group-divider"],["id","exampleModalToggle","aria-hidden","true","aria-labelledby","exampleModalToggleLabel","tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-xl","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalToggleLabel",1,"modal-title","fs-1","fw-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["scope","row"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fa-solid","fa-trash"],["data-bs-target","#exampleModalToggle","data-bs-toggle","modal",1,"btn","btn-primary","mx-4",3,"click"],[1,"fa-solid","fa-eye"],[1,"w-75",3,"src"]],template:function(r,l){r&1&&(t(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),n(5,"#"),e(),t(6,"th",3),n(7,"User"),e(),t(8,"th",3),n(9,"Date"),e(),t(10,"th",4),n(11,"Quantity"),e(),t(12,"th",3),n(13,"Handle"),e()()(),t(14,"tbody",5),C(15,A,15,6,"tr",null,f),e()(),t(17,"div",6)(18,"div",7)(19,"div",8)(20,"div",9)(21,"h1",10),n(22,"Cart Details"),e(),s(23,"button",11),e(),t(24,"div",12)(25,"table",1)(26,"thead")(27,"tr")(28,"th",2),n(29,"#"),e(),t(30,"th",3),n(31,"Name"),e(),t(32,"th",3),n(33,"Price"),e(),t(34,"th",4),n(35,"Quantity"),e(),t(36,"th",4),n(37,"Total"),e()()(),t(38,"tbody",5),C(39,U,11,5,"tr",null,f),e()()(),t(41,"div",13)(42,"h5"),n(43,"total: 500$"),e()()()()()(),I(44,N,1,0,"app-loader")),r&2&&(o(15),h(l.cartList()),o(24),h(l.item()),o(5),P(l.loading?44:-1))},dependencies:[$,D,j,F],styles:[".containt[_ngcontent-%COMP%]{margin-left:350px;margin-top:100px;width:calc(100% - 400px);font-size:1.2rem;text-align:center}.containt[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-radius:12px}.containt[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .containt[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:20px}"]})};export{B as OrdersComponent};
